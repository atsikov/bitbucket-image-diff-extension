(()=>{"use strict";var e={485:(e,i,t)=>{t.r(i),t.d(i,{default:()=>d});const d={}},439:(e,i,t)=>{t.r(i),t.d(i,{default:()=>d});const d={"diff-backdrop":"diff-image-ext__diff-backdrop-hQEzP","diff-container":"diff-image-ext__diff-container-cuBly","diff-panel":"diff-image-ext__diff-panel-SWlbL","diff-item-container":"diff-image-ext__diff-item-container-yxFAW","diff-item-before":"diff-image-ext__diff-item-before-GNdlU","diff-item-after":"diff-image-ext__diff-item-after-gPeBm","diff-item-image":"diff-image-ext__diff-item-image-M8LmM","diff-difference":"diff-image-ext__diff-difference-a2ZLN","diff-overlay":"diff-image-ext__diff-overlay-dQBOp",hidden:"diff-image-ext__hidden-mYsDU"}},456:(e,i,t)=>{t.r(i),t.d(i,{default:()=>d});const d={"image-diff-tabs":"diff-image-ext__image-diff-tabs-Qylir",tab:"diff-image-ext__tab-vge8Z",glider:"diff-image-ext__glider-AQuzd",tabs:"diff-image-ext__tabs-EPrGf"}},648:(e,i)=>{var t;Object.defineProperty(i,"__esModule",{value:!0}),i.ElementId=i.TAB_CONTAINERS_BY_TAB=i.TAB_CONTAINER_IDS=i.TAB_LABELS=i.TABS_RADIO_GROUP_NAME=i.DEFAULT_SELECTED_TAB=i.PR_CHANGED_IMAGE_SELECTOR=void 0,i.PR_CHANGED_IMAGE_SELECTOR='[data-testid="file-content"] [data-testid="image-diff"] img',i.DEFAULT_SELECTED_TAB="tab-side-by-side",i.TABS_RADIO_GROUP_NAME="diff-tabs-group",i.TAB_LABELS=[["tab-side-by-side","Side by side"],["tab-difference","Difference"],["tab-overlay","Overlay"]],i.TAB_CONTAINER_IDS={sideBySide:"diff-side-by-side",difference:"diff-difference",overlay:"diff-overlay"},i.TAB_CONTAINERS_BY_TAB={"tab-side-by-side":"diff-side-by-side","tab-difference":"diff-difference","tab-overlay":"diff-overlay"},(t=i.ElementId||(i.ElementId={})).DiffOverlayContainer="image-diff-extension-container",t.Tabs="image-diff-tabs",t.OverlayOpacityInput="overlay-opacity-input",t.DifferenceImageCanvas="diff-difference-image-canvas"},957:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createOverlayContainer=void 0;const d=t(648),f=t(989);function n(e){if(e.querySelector(`#${d.ElementId.DiffOverlayContainer}`))return;const i=e.ownerDocument.createElement("div");function t(e){const t=e.composedPath().find((e=>e instanceof HTMLElement&&"image-diff"===e.getAttribute("data-testid")));if(!t)return;const d=Array.from(t.querySelectorAll("img")).map((e=>e.src));i.style.display="block",(0,f.renderOverlay)(i,d[0],d[1]),window.addEventListener("keypress",n)}function n(e){"Escape"===e.key&&(i.style.display="none",i.innerHTML="",window.removeEventListener("keypress",n))}i.id=d.ElementId.DiffOverlayContainer,i.setAttribute("data-testid","image-diff-extension-container"),i.style.display="none",e.appendChild(i),e.querySelectorAll(d.PR_CHANGED_IMAGE_SELECTOR).forEach((e=>{e.addEventListener("click",t)})),(0,f.renderOverlay)(i,".",".")}i.createOverlayContainer=n,n(document.body)},989:function(e,i,t){var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.renderOverlay=void 0;const f=d(t(439)),n=d(t(456)),a=t(648),r={"diff-difference":f.default["diff-difference"],"diff-overlay":f.default["diff-overlay"],"diff-side-by-side":""},l=`${f.default["diff-item-container"]} ${f.default["diff-item-before"]}`,o=`${f.default["diff-item-container"]} ${f.default["diff-item-after"]}`;function s(e){return[f.default["diff-panel"],r[e],e!==a.TAB_CONTAINERS_BY_TAB[a.DEFAULT_SELECTED_TAB]&&f.default.hidden].filter(Boolean).join(" ")}i.renderOverlay=function(e,i,t){e.innerHTML=`<div class="${f.default["diff-backdrop"]}">\n    <div class="${f.default["diff-container"]}">\n      <div class="${n.default["image-diff-tabs"]}" id="${a.ElementId.Tabs}">\n      </div>\n\n      <div class="${s("diff-side-by-side")}" id="${a.TAB_CONTAINER_IDS.sideBySide}">\n        <div class="${l}">\n          <div>BEFORE</div>\n          <img class="${f.default["diff-item-image"]}" src="${i}" />\n        </div>\n        <div class="${o}">\n          <div>AFTER</div>\n          <img class="${f.default["diff-item-image"]}" src="${t}" />\n        </div>\n      </div>\n\n      <div class="${s("diff-difference")}" id="${a.TAB_CONTAINER_IDS.difference}">\n        <div class="${l}">\n          <canvas id="${a.ElementId.DifferenceImageCanvas}" class="${f.default["diff-item-image"]}" />\n        </div>\n      </div>\n\n      <div class="${s("diff-overlay")}" id="${a.TAB_CONTAINER_IDS.overlay}">\n        <div class="${l}">\n          <img class="${f.default["diff-item-image"]}" src="${i}" />\n        </div>\n        <div class="${o}">\n          <div>\n            <input\n              type="range"\n              id="${a.ElementId.OverlayOpacityInput}"\n              name="${a.ElementId.OverlayOpacityInput}"\n              min="0"\n              max="1"\n              value="0.5"\n              step="0.01"\n            />\n            <label for="${a.ElementId.OverlayOpacityInput}">Overlay opacity</label>\n          </div>\n          <img class="${f.default["diff-item-image"]}" src="${t}" />\n        </div>\n      </div>\n    </div>\n  </div>`,function(e){const i=e.querySelector(`#${a.ElementId.Tabs}`);if(!i)throw new Error("Cannot find container to inject tab bar");for(const[t,d]of a.TAB_LABELS){const r=e.ownerDocument.createElement("input");r.type="radio",r.id=t,r.name=a.TABS_RADIO_GROUP_NAME,r.checked=t===a.DEFAULT_SELECTED_TAB,r.addEventListener("click",(()=>{Object.values(a.TAB_CONTAINER_IDS).forEach((i=>{var d;null===(d=e.querySelector(`#${i}`))||void 0===d||d.classList.toggle(f.default.hidden,a.TAB_CONTAINERS_BY_TAB[t]!==i)}))}));const l=e.ownerDocument.createElement("label");l.className=n.default.tab,l.setAttribute("for",t),l.innerHTML=d,i.append(r,l)}const t=e.ownerDocument.createElement("span");t.className=n.default.glider,i.appendChild(t)}(e)}}},i={};function t(d){var f=i[d];if(void 0!==f)return f.exports;var n=i[d]={exports:{}};return e[d].call(n.exports,n,n.exports,t),n.exports}t.d=(e,i)=>{for(var d in i)t.o(i,d)&&!t.o(e,d)&&Object.defineProperty(e,d,{enumerable:!0,get:i[d]})},t.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(485),(0,t(957).createOverlayContainer)(document.body)})();